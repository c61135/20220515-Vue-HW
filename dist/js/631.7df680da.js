"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[631],{8631:function(t,e,o){o.r(e),o.d(e,{default:function(){return Gt}});var a=o(6252),l=o(3577);const s={class:"container-fluid"},i={class:"d-flex justify-content-between mt-3"},d={class:"table mt-3 py-2"},n=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{width:"60"},"排名"),(0,a._)("th",{width:"120"},"分類"),(0,a._)("th",null,"產品名稱"),(0,a._)("th",{width:"120"},"原價"),(0,a._)("th",{width:"120"},"售價"),(0,a._)("th",{width:"100"},"是否啟用"),(0,a._)("th",{width:"200"},"編輯")])],-1),c={width:"60"},r={width:"120"},u={class:"text-right"},p={class:"text-right"},h={key:0,class:"text-success"},m={key:1,class:"text-danger"},g={class:"btn-group"},_=["onClick"],b=["onClick"],P={class:"toast-container d-flex flex-column position-absolute top-0 end-0 toastMargin"};function f(t,e,o,f,w,y){const v=(0,a.up)("PaginationList"),x=(0,a.up)("LoadingStatus"),k=(0,a.up)("DeleteModal"),U=(0,a.up)("ProductModal"),M=(0,a.up)("ToastCard");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",i,[(0,a._)("button",{type:"button",class:"btn btn-success m-1","data-bs-toggle":"modal","data-bs-target":"#exampleModal",onClick:e[0]||(e[0]=t=>y.openProductModal(!0))}," 新增產品 "),(0,a.Wm)(v,{type:"products",onPrePage:y.showProducts,onChangePage:y.showProducts,onNextPage:y.showProducts},null,8,["onPrePage","onChangePage","onNextPage"])]),(0,a.Wm)(x,{active:w.isLoading},null,8,["active"]),(0,a._)("table",d,[n,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.products,((e,o)=>((0,a.wg)(),(0,a.iD)("tr",{key:o},[(0,a._)("td",c,(0,l.zw)(e.number),1),(0,a._)("td",r,(0,l.zw)(e.category),1),(0,a._)("td",null,(0,l.zw)(e.title),1),(0,a._)("td",u,(0,l.zw)(t.$filters.currency(e.origin_price)),1),(0,a._)("td",p,(0,l.zw)(t.$filters.currency(e.price)),1),(0,a._)("td",null,[e.is_enabled?((0,a.wg)(),(0,a.iD)("span",h,"啟用")):((0,a.wg)(),(0,a.iD)("span",m,"停用"))]),(0,a._)("td",null,[(0,a._)("div",g,[(0,a._)("button",{class:"btn btn-outline-primary btn-sm",onClick:t=>y.openProductModal(!1,e)}," 編輯 ",8,_),(0,a._)("button",{class:"btn btn-outline-danger btn-sm",onClick:t=>y.openDelModal(e,o)}," 刪除 ",8,b)]),(0,a.Wm)(k,{ref_for:!0,ref:"delModal",delTitle:e.title,delId:e.id,index:o,onDeleteProduct:y.deleteProduct},null,8,["delTitle","delId","index","onDeleteProduct"])])])))),128))])]),(0,a.Wm)(U,{ref:"productModal",isNew:w.isNew,tempProduct:w.tempProduct,onEditProduct:y.addData},null,8,["isNew","tempProduct","onEditProduct"]),(0,a._)("div",P,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.toastList,((t,e)=>((0,a.wg)(),(0,a.j4)(M,{key:e,msg:t},null,8,["msg"])))),128))])])}var w=o(9963);const y={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"productModal"},v={class:"modal-dialog modal-xl",role:"document"},x={class:"modal-content border-0"},k={class:"modal-header bg-dark"},U={key:0,class:"modal-title text-white",id:"exampleModalLabel"},M={key:1,class:"modal-title text-white",id:"exampleModalLabel"},$=(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),D={class:"modal-body"},L={class:"row"},C={class:"col-sm-4"},V={class:"mb-3"},N={for:"customFile",class:"form-label w-100"},z=(0,a.Uk)("上傳圖片 "),Z={class:"d-flex justify-content-center"},j=["src"],F={class:"col-sm-8"},I={class:"mb-3"},T={for:"title",class:"form-label w-100"},W=(0,a.Uk)(" 排名 "),E={class:"mb-3"},H={for:"title",class:"form-label w-100"},K=(0,a.Uk)(" 標題 "),Y={class:"row gx-2"},A={class:"mb-3 col-md-6"},B={for:"category",class:"form-label w-100"},S=(0,a.Uk)(" 作者 "),q={class:"mb-3 col-md-6"},G={for:"price",class:"form-label w-100"},J=(0,a.Uk)(" 譯者 "),O={class:"row gx-2"},Q={class:"mb-3 col-md-6"},R={for:"category",class:"form-label w-100"},X=(0,a.Uk)(" 出版社 "),tt={class:"mb-3 col-md-6"},et={for:"price",class:"form-label w-100"},ot=(0,a.Uk)(" 出版日期 "),at={class:"row gx-2"},lt={class:"mb-3 col-md-6"},st={for:"category",class:"form-label w-100"},it=(0,a.Uk)(" 分類 "),dt={class:"mb-3 col-md-6"},nt={for:"price",class:"form-label w-100"},ct=(0,a.Uk)(" 單位 "),rt={class:"row gx-2"},ut={class:"mb-3 col-md-4"},pt={for:"origin_price",class:"form-label w-100"},ht=(0,a.Uk)(" 原價 "),mt={class:"mb-3 col-md-4"},gt={for:"price",class:"form-label w-100"},_t=(0,a.Uk)(" 售價 "),bt={class:"mb-3 col-md-4"},Pt={for:"price",class:"form-label w-100"},ft=(0,a.Uk)(" 庫存 "),wt=(0,a._)("hr",null,null,-1),yt={class:"mb-3"},vt={for:"description",class:"form-label w-100"},xt=(0,a.Uk)("封面簡介 "),kt={class:"mb-3"},Ut={for:"content",class:"form-label w-100"},Mt=(0,a.Uk)("內容簡介 "),$t={class:"mb-3"},Dt={for:"content",class:"form-label w-100"},Lt=(0,a.Uk)("作者簡介 "),Ct={class:"mb-3"},Vt={class:"form-check"},Nt={class:"form-check-label",for:"is_enabled"},zt=(0,a.Uk)(" 是否啟用 "),Zt={class:"modal-footer"},jt=(0,a._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 ",-1);function Ft(t,e,o,l,s,i){return(0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",v,[(0,a._)("div",x,[(0,a._)("div",k,[o.isNew?((0,a.wg)(),(0,a.iD)("h5",U," 新增產品 ")):((0,a.wg)(),(0,a.iD)("h5",M," 編輯產品 ")),$]),(0,a._)("div",D,[(0,a._)("div",L,[(0,a._)("div",C,[(0,a._)("div",V,[(0,a._)("label",N,[z,(0,a._)("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[0]||(e[0]=(...t)=>i.uploadFile&&i.uploadFile(...t))},null,544)])]),(0,a._)("div",Z,[(0,a._)("img",{class:"img-fluid w-75 m-2",src:s.editProduct.imageUrl,alt:""},null,8,j)])]),(0,a._)("div",F,[(0,a._)("div",I,[(0,a._)("label",T,[W,(0,a.wy)((0,a._)("input",{type:"number",min:"1",class:"form-control",id:"number",placeholder:"請輸入排名","onUpdate:modelValue":e[1]||(e[1]=t=>s.editProduct.number=t)},null,512),[[w.nr,s.editProduct.number]])])]),(0,a._)("div",E,[(0,a._)("label",H,[K,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"title",placeholder:"請輸入標題","onUpdate:modelValue":e[2]||(e[2]=t=>s.editProduct.title=t)},null,512),[[w.nr,s.editProduct.title]])])]),(0,a._)("div",Y,[(0,a._)("div",A,[(0,a._)("label",B,[S,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"category",placeholder:"請輸入作者","onUpdate:modelValue":e[3]||(e[3]=t=>s.editProduct.author=t)},null,512),[[w.nr,s.editProduct.author]])])]),(0,a._)("div",q,[(0,a._)("label",G,[J,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"unit",placeholder:"請輸入翻譯者","onUpdate:modelValue":e[4]||(e[4]=t=>s.editProduct.translator=t)},null,512),[[w.nr,s.editProduct.translator]])])])]),(0,a._)("div",O,[(0,a._)("div",Q,[(0,a._)("label",R,[X,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"category",placeholder:"請輸入出版社","onUpdate:modelValue":e[5]||(e[5]=t=>s.editProduct.publisher=t)},null,512),[[w.nr,s.editProduct.publisher]])])]),(0,a._)("div",tt,[(0,a._)("label",et,[ot,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"unit",placeholder:"請輸入出版日期","onUpdate:modelValue":e[6]||(e[6]=t=>s.editProduct.date=t)},null,512),[[w.nr,s.editProduct.date]])])])]),(0,a._)("div",at,[(0,a._)("div",lt,[(0,a._)("label",st,[it,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"category",placeholder:"請輸入分類","onUpdate:modelValue":e[7]||(e[7]=t=>s.editProduct.category=t)},null,512),[[w.nr,s.editProduct.category]])])]),(0,a._)("div",dt,[(0,a._)("label",nt,[ct,(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"unit",placeholder:"請輸入單位","onUpdate:modelValue":e[8]||(e[8]=t=>s.editProduct.unit=t)},null,512),[[w.nr,s.editProduct.unit]])])])]),(0,a._)("div",rt,[(0,a._)("div",ut,[(0,a._)("label",pt,[ht,(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"origin_price",placeholder:"請輸入原價","onUpdate:modelValue":e[9]||(e[9]=t=>s.editProduct.origin_price=t)},null,512),[[w.nr,s.editProduct.origin_price]])])]),(0,a._)("div",mt,[(0,a._)("label",gt,[_t,(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"price",placeholder:"請輸入售價","onUpdate:modelValue":e[10]||(e[10]=t=>s.editProduct.price=t)},null,512),[[w.nr,s.editProduct.price]])])]),(0,a._)("div",bt,[(0,a._)("label",Pt,[ft,(0,a.wy)((0,a._)("input",{type:"number",class:"form-control",id:"price",placeholder:"請輸入庫存數量","onUpdate:modelValue":e[11]||(e[11]=t=>s.editProduct.stock=t)},null,512),[[w.nr,s.editProduct.stock]])])])]),wt,(0,a._)("div",yt,[(0,a._)("label",vt,[xt,(0,a.wy)((0,a._)("textarea",{type:"text",class:"form-control",id:"description",placeholder:"請輸入要顯示的書籍封面簡介","onUpdate:modelValue":e[12]||(e[12]=t=>s.editProduct.description=t)},"\n                  ",512),[[w.nr,s.editProduct.description]])])]),(0,a._)("div",kt,[(0,a._)("label",Ut,[Mt,(0,a.wy)((0,a._)("textarea",{type:"text",class:"form-control",id:"content",placeholder:"請輸入書籍內容簡介",style:{height:"150px"},"onUpdate:modelValue":e[13]||(e[13]=t=>s.editProduct.content=t)},"\n                  ",512),[[w.nr,s.editProduct.content]])])]),(0,a._)("div",$t,[(0,a._)("label",Dt,[Lt,(0,a.wy)((0,a._)("textarea",{type:"text",class:"form-control",id:"content",placeholder:"請輸入書籍作者簡介",style:{height:"150px"},"onUpdate:modelValue":e[14]||(e[14]=t=>s.editProduct.authorDes=t)},"\n                  ",512),[[w.nr,s.editProduct.authorDes]])])]),(0,a._)("div",Ct,[(0,a._)("div",Vt,[(0,a._)("label",Nt,[(0,a.wy)((0,a._)("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":e[15]||(e[15]=t=>s.editProduct.is_enabled=t)},null,512),[[w.e8,s.editProduct.is_enabled]]),zt])])])])])]),(0,a._)("div",Zt,[jt,(0,a._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:e[16]||(e[16]=t=>i.sendData())},"確認")])])])],512)}var It=o(7424),Tt=o.n(It),Wt={props:["isNew","tempProduct"],data(){return{editProduct:{}}},watch:{tempProduct(){this.editProduct=this.tempProduct}},methods:{openModal(){this.productModal.show()},closeModal(){this.productModal.hide()},uploadFile(){const t=this.$refs.fileInput.files[0],e=new FormData;e.append("file-to-upload",t);const o="https://vue3-course-api.hexschool.io/api/ping-api/admin/upload";this.$http.post(o,e).then((t=>{t.data.success&&(this.editProduct.imageUrl=t.data.imageUrl)}))},sendData(){const t=this.$refs.fileInput.id;document.getElementById(t).value="",this.$emit("editProduct",this.editProduct)}},mounted(){this.productModal=new(Tt())(this.$refs.productModal),this.editProduct=this.tempProduct}},Et=o(3744);const Ht=(0,Et.Z)(Wt,[["render",Ft]]);var Kt=Ht,Yt=o(3587),At=o(9958),Bt=o(4194),St={name:"dashBoard",components:{ProductModal:Kt,DeleteModal:Yt.Z,PaginationList:At.Z,ToastCard:Bt.Z},data(){return{tempProduct:{},products:{},isNew:!0,isLoading:!1,toastList:[],toastCard:[],nowPage:1}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/ping-api/products";this.$http.get(t).then((t=>{t.data.success&&(this.products=t.data.products)}))},showProducts(t=1){this.nowPage=t;const e=`https://vue3-course-api.hexschool.io/api/ping-api/admin/products?page=${t}`;this.isLoading=!0,this.$http.get(e).then((t=>{this.products=t.data.products,this.isLoading=!1,console.log(this.products)}))},openProductModal(t,e={}){this.isNew=t,this.tempProduct=e,this.$refs.productModal.openModal()},addData(t){if(this.tempProduct=t,this.isNew){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/ping-api/admin/product";this.$http.post(t,{data:this.tempProduct}).then((t=>{console.log("add",t),this.showProducts(),this.isLoading=!1;const e={title:"新增產品",...t.data};this.toastList.push(e)}))}else{console.log(this.tempProduct.id),this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/ping-api/admin/product/${this.tempProduct.id}`;this.$http.put(t,{data:this.tempProduct}).then((t=>{this.showProducts(this.nowPage),console.log("edit",t),this.isLoading=!1;const e={title:"編輯產品",...t.data};this.toastList.push(e)}))}this.tempProduct={}},openDelModal(t,e){this.$refs.delModal[e].openModal()},deleteProduct(t){this.isLoading=!0;const e=`https://vue3-course-api.hexschool.io/api/ping-api/admin/product/${t}`;this.$http.delete(e,{data:this.products}).then((t=>{this.showProducts();const e={title:"刪除產品",...t.data};this.toastList.push(e),this.isLoading=!1}))}},created(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t;const e="https://vue3-course-api.hexschool.io/api/user/check";this.isLoading=!0,this.$http.post(e).then((t=>{console.log("登入中",t)})),this.showProducts(),this.isLoading=!1},mounted(){}};const qt=(0,Et.Z)(St,[["render",f]]);var Gt=qt},9958:function(t,e,o){o.d(e,{Z:function(){return _}});var a=o(6252),l=o(9963),s=o(3577);const i={class:"booksPagination d-flex justify-content-center"},d=(0,a._)("span",{"aria-hidden":"true"},"«",-1),n=[d],c=["onClick"],r=(0,a._)("span",{"aria-hidden":"true"},"»",-1),u=[r];function p(t,e,o,d,r,p){return(0,a.wg)(),(0,a.iD)("ul",i,[(0,a._)("li",null,[(0,a._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,l.iM)((t=>p.prePage()),["prevent"]))},n)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.pagination.total_pages,(t=>((0,a.wg)(),(0,a.iD)("li",{key:t},[(0,a._)("a",{class:(0,s.C_)(["page-link",{pageActive:t==r.pagination.current_page}]),href:"#",onClick:(0,l.iM)((e=>p.changePage(t)),["prevent"])},(0,s.zw)(t),11,c)])))),128)),(0,a._)("li",null,[(0,a._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,l.iM)((t=>p.nextPage()),["prevent"]))},u)])])}var h={props:["type"],data(){return{pagination:{},page:1}},methods:{getPages(){const t=`https://vue3-course-api.hexschool.io/api/ping-api/admin/${this.type}?page=${this.page}`;this.$http.get(t).then((t=>{this.pagination=t.data.pagination}))},prePage(){this.pagination.has_pre&&(this.page-=1,this.$emit("prePage",this.page),this.getPages())},changePage(t){this.page=t,console.log("change",this.page),this.getPages(),console.log("change",this.page),this.$emit("changePage",this.page),console.log("change",this.page)},nextPage(){this.pagination.has_next&&(this.page+=1,this.$emit("changePage",this.page),this.getPages())}},mounted(){this.getPages()}},m=o(3744);const g=(0,m.Z)(h,[["render",p]]);var _=g}}]);
//# sourceMappingURL=631.7df680da.js.map