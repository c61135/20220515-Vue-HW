{"version":3,"file":"js/967.b9a594e5.js","mappings":"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","sources":["webpack://new-project/./src/components/DashboardPage/CouponList.vue","webpack://new-project/./src/components/DashboardPage/CouponModal.vue","webpack://new-project/./src/components/DashboardPage/CouponModal.vue?b4de","webpack://new-project/./src/components/DashboardPage/CouponList.vue?d29a","webpack://new-project/./src/components/public/PaginationList.vue","webpack://new-project/./src/components/public/PaginationList.vue?4813"],"sourcesContent":["<template>\n  <LoadingStatus :active=\"isLoading\"></LoadingStatus>\n  <div class=\"d-flex justify-content-between mt-3\">\n    <!-- Button trigger1 modal -->\n  <button type=\"button\" class=\"btn btn-success m-1\"\n  data-bs-toggle=\"modal\" data-bs-target=\"#exampleModal\"\n    @click=\"openCouponModal(true)\">\n    新增折價券\n  </button>\n    <!-- 分頁表 -->\n    <PaginationList :type=\"'coupons'\" @prePage=\"showcoupons\" @changePage=\"showcoupons\"\n  @nextPage=\"showcoupons\"></PaginationList>\n  </div>\n  <!-- 產品列表 -->\n  <table class=\"table mt-5 py-5\">\n    <thead>\n      <tr>\n        <th width=\"200\">名稱</th>\n        <th width=\"200\">折扣碼</th>\n        <th width=\"300\">折扣百分比</th>\n        <th>到期日</th>\n        <th width=\"100\">是否啟用</th>\n        <th width=\"200\">編輯</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"(coupon, index) in coupons\" :key=\"index\">\n        <td width=\"200\">{{ coupon.title }}</td>\n        <td width=\"200\">{{ coupon.code }}</td>\n        <td width=\"300\">{{ coupon.percent }}</td>\n        <td>{{ coupon.due_date }}</td>\n        <td>\n          <span class=\"text-success\" v-if=\"true\">啟用</span>\n          <span class=\"text-danger\" v-else>停用</span>\n        </td>\n        <td>\n          <div class=\"btn-group\">\n            <button class=\"btn btn-outline-primary btn-sm\"\n            @click=\"openCouponModal(false, coupon)\">\n              編輯</button>\n            <button class=\"btn btn-outline-danger btn-sm\"\n            @click=\"openDelModal(coupon, index)\">刪除</button>\n            <DeleteModal ref=\"delModal\" :delTitle=\"coupon.title\" :delId=\"coupon.id\"\n            :index=\"index\" @deleteProduct=\"deleteCoupon\">\n            </DeleteModal>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <!-- CouponModal -->\n  <CouponModal ref=\"couponModal\" :isNew=\"isNew\"\n  :tempCoupon=\"tempCoupon\" @editCoupon=\"addData\"></CouponModal>\n  <!-- ToastCard -->\n  <div class=\"toast-container d-flex flex-column position-absolute top-0 end-0 toastMargin\">\n    <ToastCard v-for=\"(msg, key) in toastList\" :key=\"key\" :msg=\"msg\"></ToastCard>\n  </div>\n</template>\n\n<script>\nimport CouponModal from '@/components/DashboardPage/CouponModal.vue';\nimport DeleteModal from '@/components/public/DeleteModal.vue';\nimport PaginationList from '@/components/public/PaginationList.vue';\nimport ToastCard from '@/components/public/ToastCard.vue';\n\nexport default {\n  name: 'dashBoard',\n  components: {\n    CouponModal,\n    DeleteModal,\n    PaginationList,\n    ToastCard,\n  },\n  data() {\n    return {\n      tempCoupon: {}, // 目前要新增/編輯的折價券暫存處\n      coupons: {}, // 所有的折價券\n      isNew: true, // true:新增產品, false:編輯產品\n      isLoading: false, // true的時候，載入畫面會有過場動畫\n      toastList: [],\n      toastCard: [],\n    };\n  },\n  methods: {\n    // 更新產品清單\n    showcoupons(page) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupons?page=${page}`;\n      this.isLoading = true;\n      this.$http.get(api)\n        .then((res) => {\n          this.coupons = res.data.coupons;\n          // eslint-disable-next-line no-plusplus\n          for (let i = 0; i < this.coupons.length; i++) {\n            const date = new Date(this.coupons[i].due_date);\n            this.coupons[i].due_date = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`;\n          }\n          this.isLoading = false;\n        });\n    },\n    // 開啟產品的Modal (OK)\n    openCouponModal(isNew, item = {}) {\n      this.isNew = isNew;\n      this.tempCoupon = item;\n      this.$refs.couponModal.openModal();\n    },\n    // 新增產品(如果this.isNew是true那就新增產品，如果是false那就編輯產品) (OK)\n    addData(editCoupon) {\n      this.tempCoupon = editCoupon;\n      if (this.isNew) {\n        this.isLoading = true;\n        const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon`;\n        this.$http.post(api, { data: this.tempCoupon })\n          .then((res) => {\n            console.log('add', res);\n            this.showcoupons();\n            this.isLoading = false;\n            const toastMsg = { title: '新增折價券', ...res.data };\n            this.toastList.push(toastMsg);\n          });\n      } else {\n        this.isLoading = true;\n        const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${this.tempCoupon.id}`;\n        this.$http.put(api, { data: this.tempCoupon })\n          .then((res) => {\n            this.showcoupons();\n            console.log('edit', res);\n            this.isLoading = false;\n            const toastMsg = { title: '編輯折價券', ...res.data };\n            this.toastList.push(toastMsg);\n          });\n      }\n      this.tempCoupon = {};\n    },\n    // 開啟刪除產品的Modal (OK)\n    openDelModal(item, index) {\n      this.$refs.delModal[index].openModal();\n    },\n    // 刪除產品 (OK)\n    deleteCoupon(id) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/coupon/${id}`;\n      // 把刪除完的data放回this.coupons內\n      this.$http.delete(api, { data: this.coupons })\n        .then((res) => {\n          // 刷新產品列表\n          this.showcoupons();\n          const toastMsg = { title: '刪除產品', ...res.data };\n          this.toastList.push(toastMsg);\n          this.isLoading = false;\n        });\n    },\n  },\n  created() {\n    const loginToken = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n    this.$http.defaults.headers.common.Authorization = loginToken;\n    const api = `${process.env.VUE_APP_API}api/user/check`;\n    this.isLoading = true;\n    this.$http.post(api)\n      .then((res) => {\n        console.log('登入中', res);\n      });\n    this.showcoupons();\n    this.isLoading = false;\n  },\n  mounted() {\n  },\n};\n</script>\n\n<style>\n  .toastMargin {\n  margin-top: 60px;\n}\n</style>\n","<template>\n  <!-- Modal -->\n  <div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\"\n  aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\"\n    ref=\"couponModal\">\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark\">\n          <h5 class=\"modal-title text-white\" id=\"exampleModalLabel\" v-if=\"isNew\">\n            新增折價券\n          </h5>\n          <h5 class=\"modal-title text-white\" id=\"exampleModalLabel\" v-else>\n            編輯折價券\n          </h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"\n          aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"mb-3\">\n            <label for=\"title\" class=\"form-label w-100\">\n              折價券名稱\n              <input type=\"text\" class=\"form-control\" id=\"title\"\n              placeholder=\"請輸入折價券名稱\" v-model=\"editCoupon.title\" />\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"code\" class=\"form-label w-100\">\n              折扣碼\n              <input type=\"text\" class=\"form-control\" id=\"code\"\n              placeholder=\"請輸入折扣碼\" v-model=\"editCoupon.code\" />\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"percent\" class=\"form-label w-100\">\n              折扣百分比\n              <input type=\"number\" class=\"form-control\" id=\"percent\" placeholder=\"請輸入折扣\"\n                v-model=\"editCoupon.percent\" />\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"due_date\" class=\"form-label w-100\">\n              到期日\n              <input type=\"date\" class=\"form-control\" id=\"due_date\"\n              placeholder=\"請輸入到期日\" v-model=\"editCoupon.due_date\" />\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <div class=\"form-check\">\n              <label class=\"form-check-label\" for=\"is_enabled\">\n                <input class=\"form-check-input\" type=\"checkbox\" :true-value=\"1\"\n                :false-value=\"0\" id=\"is_enabled\"\n                  v-model=\"editCoupon.is_enabled\">\n                是否啟用\n              </label>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-secondary\" data-bs-dismiss=\"modal\">取消\n          </button>\n          <button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\"\n          @click=\"sendData()\">確認</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal';\n\nexport default {\n  props: ['isNew', 'tempCoupon'],\n  data() {\n    return {\n      editCoupon: {},\n    };\n  },\n  watch: {\n    tempCoupon() {\n      this.editCoupon = this.tempCoupon;\n    },\n  },\n  methods: {\n    // 開啟Modal\n    openModal() {\n      this.couponModal.show();\n    },\n    closeModal() {\n      this.couponModal.hide();\n    },\n    sendData() {\n      this.editCoupon.due_date = Date.parse(this.editCoupon.due_date);\n      this.$emit('editCoupon', this.editCoupon);\n    },\n  },\n  mounted() {\n    // 把Modal實體化\n    this.couponModal = new Modal(this.$refs.couponModal);\n    // 把傳入的tempCoupon先指定到editCoupon，再v-modal，因為單向數據流\n    this.editCoupon = this.tempCoupon;\n  },\n};\n</script>\n\n<style>\n</style>\n","import { render } from \"./CouponModal.vue?vue&type=template&id=e7a34954\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\c6113\\\\Desktop\\\\20220515 - Vue\\\\new-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CouponList.vue?vue&type=template&id=010a91fb\"\nimport script from \"./CouponList.vue?vue&type=script&lang=js\"\nexport * from \"./CouponList.vue?vue&type=script&lang=js\"\n\nimport \"./CouponList.vue?vue&type=style&index=0&id=010a91fb&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\c6113\\\\Desktop\\\\20220515 - Vue\\\\new-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <ul class=\"booksPagination d-flex justify-content-center\">\n    <li>\n      <a class=\"page-link\" href=\"#\" aria-label=\"Previous\" @click.prevent=\"prePage()\">\n        <span aria-hidden=\"true\">&laquo;</span>\n      </a>\n    </li>\n    <li v-for=\"page in pagination.total_pages\" :key=\"page\">\n      <a class=\"page-link\" href=\"#\" :class=\"{pageActive: page == pagination.current_page }\"\n        @click.prevent=\"changePage(page)\">{{ page }}</a>\n    </li>\n    <li>\n      <a class=\"page-link\" href=\"#\" aria-label=\"Next\" @click.prevent=\"nextPage()\">\n        <span aria-hidden=\"true\">&raquo;</span>\n      </a>\n    </li>\n  </ul>\n</template>\n\n<script>\nexport default {\n  props: ['type'],\n  data() {\n    return {\n      pagination: {},\n      page: 1,\n    };\n  },\n  methods: {\n    getPages() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/${this.type}?page=${this.page}`;\n      this.$http.get(api)\n        .then((res) => {\n          this.pagination = res.data.pagination;\n        });\n    },\n    prePage() {\n      // 如果有前一頁的話，再進行後續動作\n      if (this.pagination.has_pre) {\n        this.page -= 1;\n        // 執行完後，把目前頁面傳回做產品列表更新\n        this.$emit('prePage', this.page);\n        // 會先取得this.page，再透過刷新API，取得目前最新的頁面資訊\n        this.getPages();\n      }\n    },\n    changePage(page) {\n      // 把template的page賦值到data內的page，再透過刷新API，取得目前最新的頁面資訊\n      this.page = page;\n      console.log('change', this.page);\n      this.getPages();\n      // 執行完後，把目前頁面傳回做產品列表更新\n      console.log('change', this.page);\n      this.$emit('changePage', this.page);\n      console.log('change', this.page);\n    },\n    nextPage() {\n      // 如果有前一頁的話，再進行後續動作\n      if (this.pagination.has_next) {\n        this.page += 1;\n        // 執行完後，把目前頁面傳回做產品列表更新\n        this.$emit('changePage', this.page);\n        // 會先取得this.page，再透過刷新API，取得目前最新的頁面資訊\n        this.getPages();\n      }\n    },\n  },\n  mounted() {\n    this.getPages();\n  },\n};\n</script>\n\n<style>\n.booksPagination {\n  display: flex;\n}\n\n.booksPagination li {\n  list-style-type: none;\n}\n\n.page-link {\n  color: #4C514D;\n}\n\n.pageActive {\n  background: #4C514D;\n  border: #A5A8A6 1px solid;\n  color: white;\n}\n\n.pageActive:focus {\n  background: #4C514D;\n  box-shadow: none;\n  color: white;\n}\n</style>\n","import { render } from \"./PaginationList.vue?vue&type=template&id=2344a330\"\nimport script from \"./PaginationList.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationList.vue?vue&type=script&lang=js\"\n\nimport \"./PaginationList.vue?vue&type=style&index=0&id=2344a330&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\c6113\\\\Desktop\\\\20220515 - Vue\\\\new-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","width","_createVNode","_component_LoadingStatus","active","$data","type","onClick","$options","_component_PaginationList","onPrePage","onChangePage","onNextPage","_hoisted_3","_createElementBlock","_Fragment","_renderList","coupon","index","key","_toDisplayString","title","code","percent","due_date","_hoisted_10","_hoisted_11","_component_DeleteModal","ref","delTitle","delId","id","onDeleteProduct","_component_CouponModal","isNew","tempCoupon","onEditCoupon","msg","_createBlock","_component_ToastCard","tabindex","role","for","$props","_hoisted_7","placeholder","$event","is_enabled","_hoisted_26","props","data","editCoupon","watch","this","methods","openModal","couponModal","show","closeModal","hide","sendData","Date","parse","$emit","mounted","Modal","$refs","__exports__","name","components","CouponModal","DeleteModal","PaginationList","ToastCard","coupons","isLoading","toastList","toastCard","showcoupons","page","api","$http","get","then","res","i","length","date","getFullYear","getMonth","getDate","openCouponModal","item","addData","post","console","log","toastMsg","push","put","openDelModal","delModal","deleteCoupon","delete","created","loginToken","document","cookie","replace","defaults","headers","common","Authorization","render","_hoisted_2","_hoisted_5","href","total_pages","pageActive","current_page","_hoisted_4","pagination","getPages","prePage","has_pre","changePage","nextPage","has_next"],"sourceRoot":""}