{"version":3,"file":"js/291.1d5447fa.js","mappings":"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","sources":["webpack://new-project/./src/components/DashboardPage/OrderList.vue","webpack://new-project/./src/components/DashboardPage/OrderList.vue?d491","webpack://new-project/./src/components/public/PaginationList.vue","webpack://new-project/./src/components/public/PaginationList.vue?4813"],"sourcesContent":["<template>\n  <LoadingStatus :active=\"isLoading\"></LoadingStatus>\n  <!-- 產品列表 -->\n  <table class=\"table mt-5 py-5 text-center\">\n    <thead>\n      <tr>\n        <th width=\"200\">訂購人</th>\n        <th width=\"300\">訂單編號</th>\n        <th width=\"200\">已付款</th>\n        <th width=\"250\">連絡電話</th>\n        <th>備註</th>\n        <th width=\"100\">刪除</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"(order, index) in orders\" :key=\"index\">\n        <td>{{ order.user.name }}</td>\n        <td>{{ order.id }}</td>\n        <td>{{ order.is_paid ? '已付款' : '尚未付款' }}</td>\n        <td>{{ order.user.tel }}</td>\n        <td>{{order.message}}</td>\n        <td>\n          <button class=\"btn btn-outline-danger btn-sm\"\n            @click=\"openDelModal(order, index)\">刪除</button>\n            <DeleteModal ref=\"delModal\" :delTitle=\"order.id\" :delId=\"order.id\"\n            :index=\"index\" @deleteProduct=\"deleteOrder\">\n            </DeleteModal>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <!-- 分頁表 -->\n  <PaginationList :type=\"'coupons'\" @prePage=\"showcoupons\"\n    @changePage=\"showcoupons\" @nextPage=\"showcoupons\">\n    </PaginationList>\n  <!-- ToastCard -->\n  <div class=\"toast-container d-flex flex-column position-absolute top-0 end-0 toastMargin\">\n    <ToastCard v-for=\"(msg, key) in toastList\" :key=\"key\" :msg=\"msg\"></ToastCard>\n  </div>\n</template>\n\n<script>\nimport DeleteModal from '@/components/public/DeleteModal.vue';\nimport PaginationList from '@/components/public/PaginationList.vue';\nimport ToastCard from '@/components/public/ToastCard.vue';\n\nexport default {\n  name: 'dashBoard',\n  components: {\n    DeleteModal,\n    PaginationList,\n    ToastCard,\n  },\n  data() {\n    return {\n      orders: {}, // 所有的訂單\n      isLoading: false, // true的時候，載入畫面會有過場動畫\n      toastList: [],\n      toastCard: [],\n    };\n  },\n  methods: {\n    // 更新產品清單\n    showOrders(page) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`;\n      this.isLoading = true;\n      this.$http.get(api)\n        .then((res) => {\n          this.orders = res.data.orders;\n          console.log('orders', this.orders);\n          this.isLoading = false;\n        });\n    },\n    // 開啟刪除產品的Modal (OK)\n    openDelModal(item, index) {\n      this.$refs.delModal[index].openModal();\n    },\n    // 刪除產品 (OK)\n    deleteOrder(id) {\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/order/${id}`;\n      // 把刪除完的data放回this.coupons內\n      this.$http.delete(api, { data: this.coupons })\n        .then((res) => {\n          // 刷新產品列表\n          this.showOrders();\n          const toastMsg = { title: '刪除產品', ...res.data };\n          this.toastList.push(toastMsg);\n          this.isLoading = false;\n        });\n    },\n  },\n  created() {\n    const loginToken = document.cookie.replace(/(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n    this.$http.defaults.headers.common.Authorization = loginToken;\n    const api = `${process.env.VUE_APP_API}api/user/check`;\n    this.isLoading = true;\n    this.$http.post(api)\n      .then((res) => {\n        console.log('登入中', res);\n      });\n    this.showOrders();\n    this.isLoading = false;\n  },\n  mounted() {\n  },\n};\n</script>\n\n<style>\n  .toastMargin {\n  margin-top: 60px;\n}\n</style>\n","import { render } from \"./OrderList.vue?vue&type=template&id=42fc8942\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js\"\n\nimport \"./OrderList.vue?vue&type=style&index=0&id=42fc8942&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\c6113\\\\Desktop\\\\20220515 - Vue\\\\new-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <ul class=\"booksPagination d-flex justify-content-center\">\n    <li>\n      <a class=\"page-link\" href=\"#\" aria-label=\"Previous\" @click.prevent=\"prePage()\">\n        <span aria-hidden=\"true\">&laquo;</span>\n      </a>\n    </li>\n    <li v-for=\"page in pagination.total_pages\" :key=\"page\">\n      <a class=\"page-link\" href=\"#\" :class=\"{pageActive: page == pagination.current_page }\"\n        @click.prevent=\"changePage(page)\">{{ page }}</a>\n    </li>\n    <li>\n      <a class=\"page-link\" href=\"#\" aria-label=\"Next\" @click.prevent=\"nextPage()\">\n        <span aria-hidden=\"true\">&raquo;</span>\n      </a>\n    </li>\n  </ul>\n</template>\n\n<script>\nexport default {\n  props: ['type'],\n  data() {\n    return {\n      pagination: {},\n      page: 1,\n    };\n  },\n  methods: {\n    getPages() {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/${this.type}?page=${this.page}`;\n      this.$http.get(api)\n        .then((res) => {\n          this.pagination = res.data.pagination;\n        });\n    },\n    prePage() {\n      // 如果有前一頁的話，再進行後續動作\n      if (this.pagination.has_pre) {\n        this.page -= 1;\n        // 執行完後，把目前頁面傳回做產品列表更新\n        this.$emit('prePage', this.page);\n        // 會先取得this.page，再透過刷新API，取得目前最新的頁面資訊\n        this.getPages();\n      }\n    },\n    changePage(page) {\n      // 把template的page賦值到data內的page，再透過刷新API，取得目前最新的頁面資訊\n      this.page = page;\n      console.log('change', this.page);\n      this.getPages();\n      // 執行完後，把目前頁面傳回做產品列表更新\n      console.log('change', this.page);\n      this.$emit('changePage', this.page);\n      console.log('change', this.page);\n    },\n    nextPage() {\n      // 如果有前一頁的話，再進行後續動作\n      if (this.pagination.has_next) {\n        this.page += 1;\n        // 執行完後，把目前頁面傳回做產品列表更新\n        this.$emit('changePage', this.page);\n        // 會先取得this.page，再透過刷新API，取得目前最新的頁面資訊\n        this.getPages();\n      }\n    },\n  },\n  mounted() {\n    this.getPages();\n  },\n};\n</script>\n\n<style>\n.booksPagination {\n  display: flex;\n}\n\n.booksPagination li {\n  list-style-type: none;\n}\n\n.page-link {\n  color: #4C514D;\n}\n\n.pageActive {\n  background: #4C514D;\n  border: #A5A8A6 1px solid;\n  color: white;\n}\n\n.pageActive:focus {\n  background: #4C514D;\n  box-shadow: none;\n  color: white;\n}\n</style>\n","import { render } from \"./PaginationList.vue?vue&type=template&id=2344a330\"\nimport script from \"./PaginationList.vue?vue&type=script&lang=js\"\nexport * from \"./PaginationList.vue?vue&type=script&lang=js\"\n\nimport \"./PaginationList.vue?vue&type=style&index=0&id=2344a330&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\c6113\\\\Desktop\\\\20220515 - Vue\\\\new-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","width","_createVNode","_component_LoadingStatus","active","$data","_hoisted_2","_createElementBlock","_Fragment","_renderList","order","index","key","_toDisplayString","user","name","id","is_paid","tel","message","onClick","$options","_hoisted_3","_component_DeleteModal","ref","delTitle","delId","onDeleteProduct","_component_PaginationList","type","onPrePage","_ctx","onChangePage","onNextPage","msg","_createBlock","_component_ToastCard","components","DeleteModal","PaginationList","ToastCard","data","orders","isLoading","toastList","toastCard","methods","showOrders","page","api","this","$http","get","then","res","console","log","openDelModal","item","$refs","delModal","openModal","deleteOrder","delete","coupons","toastMsg","title","push","created","loginToken","document","cookie","replace","defaults","headers","common","Authorization","post","mounted","__exports__","render","_hoisted_5","href","total_pages","pageActive","current_page","_hoisted_4","props","pagination","getPages","prePage","has_pre","$emit","changePage","nextPage","has_next"],"sourceRoot":""}