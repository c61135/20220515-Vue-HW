"use strict";(self["webpackChunknew_project"]=self["webpackChunknew_project"]||[]).push([[291],{3291:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var n=a(3396),i=a(7139);const s={class:"table mt-5 py-5 text-center"},o=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{width:"200"},"訂購人"),(0,n._)("th",{width:"300"},"訂單編號"),(0,n._)("th",{width:"200"},"已付款"),(0,n._)("th",{width:"250"},"連絡電話"),(0,n._)("th",null,"備註"),(0,n._)("th",{width:"100"},"刪除")])],-1),l=["onClick"],h={class:"toast-container d-flex flex-column position-absolute top-0 end-0 toastMargin"};function r(e,t,a,r,d,g){const p=(0,n.up)("LoadingStatus"),c=(0,n.up)("DeleteModal"),u=(0,n.up)("PaginationList"),_=(0,n.up)("ToastCard");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(p,{active:d.isLoading},null,8,["active"]),(0,n._)("table",s,[o,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.orders,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:t},[(0,n._)("td",null,(0,i.zw)(e.user.name),1),(0,n._)("td",null,(0,i.zw)(e.id),1),(0,n._)("td",null,(0,i.zw)(e.is_paid?"已付款":"尚未付款"),1),(0,n._)("td",null,(0,i.zw)(e.user.tel),1),(0,n._)("td",null,(0,i.zw)(e.message),1),(0,n._)("td",null,[(0,n._)("button",{class:"btn btn-outline-danger btn-sm",onClick:a=>g.openDelModal(e,t)},"刪除",8,l),(0,n.Wm)(c,{ref_for:!0,ref:"delModal",delTitle:e.id,delId:e.id,index:t,onDeleteProduct:g.deleteOrder},null,8,["delTitle","delId","index","onDeleteProduct"])])])))),128))])]),(0,n.Wm)(u,{type:"coupons",onPrePage:e.showcoupons,onChangePage:e.showcoupons,onNextPage:e.showcoupons},null,8,["onPrePage","onChangePage","onNextPage"]),(0,n._)("div",h,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.toastList,((e,t)=>((0,n.wg)(),(0,n.j4)(_,{key:t,msg:e},null,8,["msg"])))),128))])],64)}var d=a(3587),g=a(9958),p=a(4194),c={name:"dashBoard",components:{DeleteModal:d.Z,PaginationList:g.Z,ToastCard:p.Z},data(){return{orders:{},isLoading:!1,toastList:[],toastCard:[]}},methods:{showOrders(e){const t=`https://vue3-course-api.hexschool.io/api/ping-api/admin/orders?page=${e}`;this.isLoading=!0,this.$http.get(t).then((e=>{this.orders=e.data.orders,console.log("orders",this.orders),this.isLoading=!1}))},openDelModal(e,t){this.$refs.delModal[t].openModal()},deleteOrder(e){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/ping-api/admin/order/${e}`;this.$http.delete(t,{data:this.coupons}).then((e=>{this.showOrders();const t={title:"刪除產品",...e.data};this.toastList.push(t),this.isLoading=!1}))}},created(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=e;const t="https://vue3-course-api.hexschool.io/api/user/check";this.isLoading=!0,this.$http.post(t).then((e=>{console.log("登入中",e)})),this.showOrders(),this.isLoading=!1},mounted(){}},u=a(89);const _=(0,u.Z)(c,[["render",r]]);var w=_},9958:function(e,t,a){a.d(t,{Z:function(){return w}});var n=a(3396),i=a(9242),s=a(7139);const o={class:"booksPagination d-flex justify-content-center"},l=(0,n._)("span",{"aria-hidden":"true"},"«",-1),h=[l],r=["onClick"],d=(0,n._)("span",{"aria-hidden":"true"},"»",-1),g=[d];function p(e,t,a,l,d,p){return(0,n.wg)(),(0,n.iD)("ul",o,[(0,n._)("li",null,[(0,n._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,i.iM)((e=>p.prePage()),["prevent"]))},h)]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(d.pagination.total_pages,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e},[(0,n._)("a",{class:(0,s.C_)(["page-link",{pageActive:e==d.pagination.current_page}]),href:"#",onClick:(0,i.iM)((t=>p.changePage(e)),["prevent"])},(0,s.zw)(e),11,r)])))),128)),(0,n._)("li",null,[(0,n._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,i.iM)((e=>p.nextPage()),["prevent"]))},g)])])}var c={props:["type"],data(){return{pagination:{},page:1}},methods:{getPages(){const e=`https://vue3-course-api.hexschool.io/api/ping-api/admin/${this.type}?page=${this.page}`;this.$http.get(e).then((e=>{this.pagination=e.data.pagination}))},prePage(){this.pagination.has_pre&&(this.page-=1,this.$emit("prePage",this.page),this.getPages())},changePage(e){this.page=e,console.log("change",this.page),this.getPages(),console.log("change",this.page),this.$emit("changePage",this.page),console.log("change",this.page)},nextPage(){this.pagination.has_next&&(this.page+=1,this.$emit("changePage",this.page),this.getPages())}},mounted(){this.getPages()}},u=a(89);const _=(0,u.Z)(c,[["render",p]]);var w=_}}]);
//# sourceMappingURL=291.1d5447fa.js.map